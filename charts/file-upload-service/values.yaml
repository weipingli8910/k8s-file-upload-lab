# Default values for file-upload-service
# This is a YAML-formatted file.

# Application name
nameOverride: ""
fullnameOverride: ""

# Image configuration
image:
  repository: ""  # ECR/GCR/ACR URL - must be provided
  tag: "latest"
  pullPolicy: Always

# Replica configuration
replicaCount: 2

# Namespace
namespace:
  create: true
  name: file-upload

# Service account
serviceAccount:
  create: true
  name: ""  # If not set, uses fullname
  annotations: {}  # For IRSA, Workload Identity, Managed Identity
  automountServiceAccountToken: true

# Application configuration
config:
  # AWS configuration
  s3Bucket: ""
  awsRegion: "us-east-1"
  
  # GCP configuration (for future use)
  gcsBucket: ""
  gcpProject: ""
  
  # Azure configuration (for future use)
  storageAccount: ""
  storageContainer: ""
  
  # Common configuration
  port: 8080
  logLevel: "info"

# Cloud provider (aws, gcp, azure)
cloudProvider: "aws"

# Resource limits
resources:
  requests:
    cpu: "100m"
    memory: "128Mi"
  limits:
    cpu: "500m"
    memory: "512Mi"

# Service configuration
service:
  type: ClusterIP
  port: 80
  targetPort: 8080
  name: http

# Ingress configuration
ingress:
  enabled: true
  className: "alb"  # alb for AWS, gce for GCP, azure/application-gateway for Azure
  annotations: {}  # Cloud-specific annotations
  hosts:
    - host: ""
      paths:
        - path: /
          pathType: Prefix

# Autoscaling (HPA)
autoscaling:
  enabled: true
  minReplicas: 2
  maxReplicas: 10
  targetCPUUtilizationPercentage: 70
  targetMemoryUtilizationPercentage: 80
  behavior:
    scaleDown:
      stabilizationWindowSeconds: 300
      policies:
        - type: Percent
          value: 50
          periodSeconds: 60
    scaleUp:
      stabilizationWindowSeconds: 0
      policies:
        - type: Percent
          value: 100
          periodSeconds: 30
        - type: Pods
          value: 2
          periodSeconds: 30
      selectPolicy: Max

# Monitoring
monitoring:
  enabled: true
  prometheus:
    scrape: true
    port: 8080
    path: "/metrics"
  serviceMonitor:
    enabled: true
    interval: 30s
    scrapeTimeout: 10s

# Health checks
livenessProbe:
  httpGet:
    path: /health
    port: 8080
  initialDelaySeconds: 30
  periodSeconds: 10

readinessProbe:
  httpGet:
    path: /ready
    port: 8080
  initialDelaySeconds: 10
  periodSeconds: 5

